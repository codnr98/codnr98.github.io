{"componentChunkName":"component---src-templates-post-template-tsx","path":"/react/useEffect/","result":{"data":{"allMarkdownRemark":{"edges":[{"node":{"html":"<h2>useEffect?</h2>\n<hr>\n<aside>\n🎯 useEffect는 컴포넌트 내에서 Side effect를 실행할 수 있게 해주는 Hook이다.\n즉 외부 시스템과 동기화하려는 목적으로 사용된다.\n</aside>\n<p>함수가 실행되면서 함수 외부에 존재하는 값이나 상태를 변경시키는 등의 행위이다.</p>\n<p>ex)</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">let</span> foo <span class=\"token operator\">=</span> <span class=\"token string\">'hello'</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">bar</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  foo <span class=\"token operator\">=</span> <span class=\"token string\">'world'</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token function\">bar</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// bar가 side effect를 발생시킴</span></code></pre></div>\n<p>React에서는 컴포넌트 내에서 fetch 를 통해 API 정보를 가져오거나 이벤트를 활용해 DOM을 직접 조작할 때 Side Effect가 발생 했다고 말한다.</p>\n<h3>Clean UP</h3>\n<hr>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">=></span><span class=\"token punctuation\">{</span>\n\t<span class=\"token operator\">...</span>\n\t<span class=\"token keyword\">return</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">=></span><span class=\"token punctuation\">{</span>\n\t\t<span class=\"token operator\">...</span>\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>useEffect의 Effect 함수에서 타이머를 시작하면 타이머를 끝내는 작업이 필요하고, 이벤트 리스너를 등록했다면 등록한 리스너를 제거해주는 작업을 해야한다.</p>\n<p>해당 컴포넌트가 언마운트 될 때 , 다음 렌더링시 불리는 useEffect 가 실행되기 이전에 실행된다.</p>\n<p>ex)</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> timer <span class=\"token operator\">=</span> <span class=\"token function\">setInterval</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'타이머 돌아가는중...'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">clearInterval</span><span class=\"token punctuation\">(</span>timer<span class=\"token punctuation\">)</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'타이머 종료'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>위 예시 코드는 해당 컴포넌트가 마운트 되면 타이머는 돌아간다. 그러다 해당 컴포넌트가 언마운트 되면 clean up 함수가 실행되면서 타이머는 제거된다.</p>\n<h3>useEffect의 첫 번째 인자</h3>\n<hr>\n<blockquote>\n<p><code class=\"language-text\">useEffect(func)</code></p>\n</blockquote>\n<p>useEffect의 첫 번째 인자로는 함수가 들어간다. 해당 함수 내에서 Side effect를 샐행시킬 수 있다.</p>\n<h3>useEffect의 실행 조건( 종속성 배열이 없는 경우)</h3>\n<hr>\n<ol>\n<li>컴포넌트 생성 후 처음 화면에 렌더링</li>\n<li>컴포넌트에 새로운 props가 전달되며 렌더링</li>\n<li>컴포넌트에 state가 바뀌면서 렌더링</li>\n</ol>\n<p>이와 같이 매번 새롭게 컴포넌트가 렌더링 될 때 Effect Hook이 실행된다.</p>\n<h3>useEffect의 두 번째 인자</h3>\n<hr>\n<blockquote>\n<p><code class=\"language-text\">useEffect(func, [종속성1, 종속성2, ...])</code></p>\n</blockquote>\n<p>useEffect의 두 번째 인자는 종속성 배열이다.</p>\n<p>배열 내의 종속성의 값이 변할 때 useEffect의 첫 번째 인자인 함수가 실행된다.</p>\n<h3>두 번째 인자에 빈 배열이 들어갈 경우</h3>\n<hr>\n<p>이때에는 컴포넌트가 처음 생성될 때만 effect 함수가 실행된다. 보통은 처음 단 한번 외부에서 API를 통해 리소스를 받아오고 더 이상 해당 API의 호출이 필요없는 경우 사용할 수 있다.</p>","frontmatter":{"title":"[React]useEffect","summary":"useEffect란?","date":"2023.05.25.","categories":["Web","React","useEffect"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","placeholder":{"fallback":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAAArElEQVQoz61TbQuCMBj0//+ZgoqCvlSEqOBGulma5hft1egnXGygrKDGph+Oh93Yccc9c9J7jCHh/Lo43KJuqlA5I0FVNHswCZXr5ZDVBKymSC47O4cf8a4Rlv4cs80YLl9Lp70iHxuO4rWX5/yZdIJGkVsH4nGQbrFwp5isRnKGhYesYfaR44qAnDzQMgAtffAz/VuONrJwKWK30DWtL+VrD1Xe2OGgP8VW8A20BliBvPrEZgAAAABJRU5ErkJggg=="},"images":{"fallback":{"src":"/static/f3a9449e0fd3938f7ee8958781ac24ce/30120/useEffect.png","srcSet":"/static/f3a9449e0fd3938f7ee8958781ac24ce/2a641/useEffect.png 462w,\n/static/f3a9449e0fd3938f7ee8958781ac24ce/bea7d/useEffect.png 923w,\n/static/f3a9449e0fd3938f7ee8958781ac24ce/30120/useEffect.png 1846w","sizes":"(min-width: 1846px) 1846px, 100vw"},"sources":[{"srcSet":"/static/f3a9449e0fd3938f7ee8958781ac24ce/f4468/useEffect.webp 462w,\n/static/f3a9449e0fd3938f7ee8958781ac24ce/d2aca/useEffect.webp 923w,\n/static/f3a9449e0fd3938f7ee8958781ac24ce/1136a/useEffect.webp 1846w","type":"image/webp","sizes":"(min-width: 1846px) 1846px, 100vw"}]},"width":1846,"height":1120}},"publicURL":"/static/f3a9449e0fd3938f7ee8958781ac24ce/useEffect.png"}}}}]}},"pageContext":{"slug":"/react/useEffect/"}},"staticQueryHashes":[]}