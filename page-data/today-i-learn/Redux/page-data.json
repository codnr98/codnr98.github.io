{"componentChunkName":"component---src-templates-post-template-tsx","path":"/today-i-learn/Redux/","result":{"data":{"allMarkdownRemark":{"edges":[{"node":{"html":"<h3>Redux를 사용하는 이유</h3>\n<p>기존 리액트에서 상태관리를할 떄는 컴포넌트의 구조에 따라 데이터 흐름도 바뀌고 애플리케이션의 구조가 복잡해질수록 데이터의 흐름 또한 복잡해지고 컴포넌트 구조가 바뀌면 데이터 흐름 또한 바뀔 수 있다. 이를 계선하기 위해서 상태관리 라이브러리인 Redux를 사용한다.</p>\n<h3>Redux의 구조</h3>\n<p>Redux의 상태관리</p>\n<ol>\n<li>상태가 변경되어야 하는 이벤트가 발생되면 변경될 상태에 대한 정보가 담긴 <code class=\"language-text\">Action</code> 객체가 생성된다.</li>\n<li>이 Action 객체는 <code class=\"language-text\">Dispatch</code> 함수 인자로 전달된다.</li>\n<li><code class=\"language-text\">Dispatch</code> 함수는 <code class=\"language-text\">Action</code> 객체를 <code class=\"language-text\">Reducer</code>함수로 전달해준다.</li>\n<li><code class=\"language-text\">Reducer</code> 함수는 <code class=\"language-text\">Action</code> 객체의 값을 확인하고, 그 값에 따라 전역 상태 저장소 <code class=\"language-text\">Store</code>의 상태를 변경한다.</li>\n<li>상태가 변경되면 React는 리렌더링 해준다.</li>\n</ol>\n<h3>Store</h3>\n<p>Store는 Redux 앱의 state가 저장된 공간이다.</p>\n<p><code class=\"language-text\">createStore</code> 메서드를 사용해서 Reducer를 연결하여 Store을 생성할 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> createStore <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'redux'</span>\n\n<span class=\"token keyword\">const</span> store <span class=\"token operator\">=</span> <span class=\"token function\">createStore</span><span class=\"token punctuation\">(</span>rootReducer<span class=\"token punctuation\">)</span></code></pre></div>\n<h3>Reducer</h3>\n<p>Reducer는 Dispatch에서 전달받은 Action 객체의 type 값에 따라서 상태를 변경시키는 함수다.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> count <span class=\"token operator\">=</span> <span class=\"token number\">1</span>\n\n<span class=\"token comment\">// Reducer를 생성할 때에는 초기 상태를 인자로 요구한다.</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">counterReducer</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">state <span class=\"token operator\">=</span> count<span class=\"token punctuation\">,</span> action</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">switch</span> <span class=\"token punctuation\">(</span>action<span class=\"token punctuation\">.</span>type<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">//action === 'INCREASE'일 경우</span>\n    <span class=\"token keyword\">case</span> <span class=\"token string\">'INCREASE'</span><span class=\"token operator\">:</span>\n      <span class=\"token keyword\">return</span> state <span class=\"token operator\">+</span> <span class=\"token number\">1</span>\n\n    <span class=\"token comment\">// action === 'DECREASE'일 경우</span>\n    <span class=\"token keyword\">case</span> <span class=\"token string\">'DECREASE'</span><span class=\"token operator\">:</span>\n      <span class=\"token keyword\">return</span> state <span class=\"token operator\">-</span> <span class=\"token number\">1</span>\n\n    <span class=\"token comment\">// action === 'SET_NUMBER'일 경우</span>\n    <span class=\"token keyword\">case</span> <span class=\"token string\">'SET_NUMBER'</span><span class=\"token operator\">:</span>\n      <span class=\"token keyword\">return</span> action<span class=\"token punctuation\">.</span>payload\n\n    <span class=\"token comment\">// 해당 되는 경우가 없을 땐 기존 상태를 그대로 리턴</span>\n    <span class=\"token keyword\">default</span><span class=\"token operator\">:</span>\n      <span class=\"token keyword\">return</span> state\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token comment\">// Reducer가 리턴하는 값이 새로운 상태가 된다.</span></code></pre></div>\n<p>이 떄 Reducer은 순수함수여야 한다. 외부 요인으로 인해 기대값이 아닌 엉뚱한 값으로 상태가 변경되는 일은 없어야되기 때문이다.</p>\n<p>만약 여러개의 Reducer을 사용하는 경우 <code class=\"language-text\">combineReducer</code> 메서드를 사용하여 하나의 Reducer로 합쳐줄 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> combineReducer <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'redux'</span>\n\n<span class=\"token keyword\">const</span> rootReducer <span class=\"token operator\">=</span> <span class=\"token function\">combineReducers</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  counterReducer<span class=\"token punctuation\">,</span>\n  anyReducer<span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h3>Action</h3>\n<p>어떤 액션을 취할 것인지 정해 놓는 객체다</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// payload가 필요없는 경우</span>\n<span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">type</span> <span class=\"token operator\">:</span> <span class=\"token string\">'INCREASE'</span> <span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// payload가 필요한 경우</span>\n<span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">type</span> <span class=\"token operator\">:</span> <span class=\"token string\">'SET_NUMBER'</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">payload</span><span class=\"token operator\">:</span> <span class=\"token number\">5</span> <span class=\"token punctuation\">}</span></code></pre></div>\n<p><code class=\"language-text\">type</code>은 해당 <code class=\"language-text\">Action</code> 객체가 어떤동작을 하는지 명시해 주는 역할을 한다. <code class=\"language-text\">type</code> 값은 대문자와 <code class=\"language-text\">Snake Case</code>로 작성한다. 여기에 필요에 따라 <code class=\"language-text\">payload</code>를 작성해 구체적인 값을 전달할 수 있다.</p>\n<p>보통은 <code class=\"language-text\">Action</code> 을 직접 작성하기보다는 <code class=\"language-text\">Action</code> 객체를 생성하는 함수를 만들어 사용하는 경우가 많다. 이런 함수를 액션 생성자 함수(Action Creator)라고도 한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// payload가 필요없는 경우</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">increase</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">'INCREASE'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// payload가 필요한 경우</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">setNumber</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">num</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">'SET_NUMBER'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">payload</span><span class=\"token operator\">:</span> num<span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3>useDispatch()</h3>\n<p>useDispatch()는 Reducer로 Action 객체를 Reducer로 전달해 주는 Dispatch 함수를 반환하는 메서드다.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> useDispatch <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react-redux'</span>\n\n<span class=\"token keyword\">const</span> dispatch <span class=\"token operator\">=</span> <span class=\"token function\">useDispatch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\">// Action 객체를 직접 작성하는 경우</span>\n<span class=\"token function\">dispatch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">'INCREASE'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token function\">dispatch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">'SET_NUMBER'</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">payload</span><span class=\"token operator\">:</span> <span class=\"token number\">5</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\">// 액션 생성자(Action Creator)를 사용하는 경우</span>\n<span class=\"token function\">dispatch</span><span class=\"token punctuation\">(</span><span class=\"token function\">increase</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token function\">dispatch</span><span class=\"token punctuation\">(</span><span class=\"token function\">setNumber</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>Action 객체를 전달받은 Dispatch 함수는 Reducer를 호출한다.</p>\n<h3>useSelector()</h3>\n<p><code class=\"language-text\">useSelector()</code> 는 컴포넌트와 state를 연결하여 Redux의 state에 접근할 수 있도록 해준다.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// Redux Hooks 메서드는 'redux'가 아니라 'react-redux'에서 불러올 수 있다.</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> useSelector <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react-redux'</span>\n<span class=\"token comment\">// useSelector()의 콜백 인자에 Store에 저장된 모든 state가 담긴다.</span>\n<span class=\"token keyword\">const</span> counter <span class=\"token operator\">=</span> <span class=\"token function\">useSelector</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">state</span> <span class=\"token operator\">=></span> state<span class=\"token punctuation\">)</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>counter<span class=\"token punctuation\">)</span> <span class=\"token comment\">// 1</span></code></pre></div>","frontmatter":{"title":"[TIL]Redux","summary":"Redux를 사용한 상태관리...","date":"2022.12.30.","categories":["Web","React","Redux","상태관리"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","placeholder":{"fallback":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAg0lEQVQoz2M4/+jzf2piBnyS5x5+gtMwjCxOsoHImi8++UbQMLwGIrvo7IOP/49cfUq5C5EN3Hbsyv9Td9/+P//4C4plJLkQxctPqeBlGL1h/9n/a3Yd/7/92BWwa/EZTFwY3v8A9u7pe+8wLCQ7ls8/+oJhEdkuRE+HFLmQqjmFHAMBvDZmvR6ldVQAAAAASUVORK5CYII="},"images":{"fallback":{"src":"/static/d0be11a5542e804b3022d4ba71cc7e74/0503d/Redux.png","srcSet":"/static/d0be11a5542e804b3022d4ba71cc7e74/c4761/Redux.png 253w,\n/static/d0be11a5542e804b3022d4ba71cc7e74/04789/Redux.png 506w,\n/static/d0be11a5542e804b3022d4ba71cc7e74/0503d/Redux.png 1012w","sizes":"(min-width: 1012px) 1012px, 100vw"},"sources":[{"srcSet":"/static/d0be11a5542e804b3022d4ba71cc7e74/3ecfc/Redux.webp 253w,\n/static/d0be11a5542e804b3022d4ba71cc7e74/1b727/Redux.webp 506w,\n/static/d0be11a5542e804b3022d4ba71cc7e74/72237/Redux.webp 1012w","type":"image/webp","sizes":"(min-width: 1012px) 1012px, 100vw"}]},"width":1012,"height":613}},"publicURL":"/static/d0be11a5542e804b3022d4ba71cc7e74/Redux.png"}}}}]}},"pageContext":{"slug":"/today-i-learn/Redux/"}},"staticQueryHashes":[]}