{"componentChunkName":"component---src-templates-post-template-tsx","path":"/javascript/closure/","result":{"data":{"allMarkdownRemark":{"edges":[{"node":{"html":"<p>난 최근까지 클로저가 뭔지 잘 모르는 상태에서 프로그래밍을 했었고 클로저가 무엇인지? 어떤상황에서 사용하는지 확실하게 학습하는 계기가 되었다.</p>\n<h3>렉시컬 스코프</h3>\n<p>렉시컬 스코프는 자바스크립트 엔진이 함수를 어디서 호출했는지가 아닌 함수를 어디서 정의했는지에 따라 상위 스코프를 결정하는 것을 말한다.</p>\n<h3>함수 객체의 내부 슬롯<code class=\"language-text\">[[Emvironment]]</code></h3>\n<p>함수가 정의된 환경과 호출되는 환경은 다를 수 있다. 따라서 렉시컬 스코프가 가능하려면 함수는 호출되는 위치와 상관없이 자신이 정의된 환경을 기억해야한다. 이를 위해 함수는 자신의 내부 슬롯 <code class=\"language-text\">[[Enviroment]]</code>에 자신이 정의된 환경(상위 스코프)의 참조를 저장한다.</p>\n<p>함수의 정의가 평가되어 함수 객체를 생성하는 평가단계에서 함수 객체 내부 슬롯 <code class=\"language-text\">[[Enviroment]]</code>에 자신의 상위 스코프의 참조값을 저장한다.</p>\n<p>이로서 함수 객체 내부 슬롯 <code class=\"language-text\">[[Enviroment]]</code>에 렉시컬 환경의 참조를 저장하고 함수 자신이 존재하는 한 이를 기억할 수 있다.</p>\n<h3>클로저</h3>\n<p>중첩 함수가 있고 이때 외부 함수보다 중첩 함수가 더 오래 유지되는 상황에서도\n함수는 이미 생명 주기가 종료한 외부 함수의 변수를 참조할 수 있다.\n이러한 중첩 함수를 클로저라 부른다.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> x <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">outer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">const</span> x <span class=\"token operator\">=</span> <span class=\"token number\">10</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">inner</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\tconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">return</span> inner<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> innerFunc <span class=\"token operator\">=</span> <span class=\"token function\">outer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">innerFunc</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// -> 10</span></code></pre></div>\n<p>원리는 이러하다\n외부 함수가 평가되고 실행하면서 중첩된 내부 함수를 반환하고 생명 주기가 종료된다.\n즉 외부 함수의 실행 컨텍스트가 실행 컨텍스트 스택에서 제거된다.</p>\n<p>하지만 외부 함수의 실행 컨텍스트가 제거된다 해서 해당 함수의 렉시컬 환경까지 소멸하는 것은 아니다.</p>\n<p>외부 함수의 렉시컬 환경은 내부 함수의 <code class=\"language-text\">[[Enviroment]]</code>내부 슬롯에 의해 참조되고 있고 해당 함수의 렉시컬 환경은 가비지 컬렉션의 대상이 되지 않는다.</p>\n<p>이후 외부 함수가 반환한 내부 함수가 호출 되면서 내부 함수의 실행 컨텍스트가 생성되고 실행 컨텍스트 스택에 푸시된다.</p>\n<p>그리고 렉시컬 환경에 대한 참조에는 내부 함수 객체의 내부 슬롯 <code class=\"language-text\">[[Enviroment]]</code> 값이 할당 된다.</p>\n<p>이러한 원리로 생명주기가 끝나 실행 컨텍스트가 제거된 외부함수의 렉시컬 환경을 내부함수가 기억하여 이후에 내부 함수가 실행될 때 자신의 상위 스코프를 참조할 수 있게 되는 것 이다.</p>\n<h2>Source</h2>\n<ul>\n<li>이웅모, 모던 자바스크립트 Deep Dive, 위키북스, 2020</li>\n</ul>","frontmatter":{"title":"[JS]클로저","summary":"클로저에 관해서","date":"2023.10.01.","categories":["Web","javascript","closure"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","placeholder":{"fallback":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAAAuElEQVQoz61TywrCMBDs//+L6ElRxItWxJroQbQoglJ8RBTUJi0IOkIwpQlVEu1hWTbsTGYzGw+3EcoMr+jweQ2yXBT5HitCk/RxCbScv8xZITgB0gkgKJCMAU4/qvtKqECbWR3TYQUhrWFOqtgumhmpk0LVnB77SJiP+3mAeN+VtfPIGkBQnNYd7JYtCObL+ueRJTAmYKs2orABfujJ2nTcSqFmkDLkTea8h+Yb2e6glcJSfso/hC8UGXylNnTF2QAAAABJRU5ErkJggg=="},"images":{"fallback":{"src":"/static/a77887751bf978b67f6a4961e82b2e76/440c2/closure.png","srcSet":"/static/a77887751bf978b67f6a4961e82b2e76/49edb/closure.png 461w,\n/static/a77887751bf978b67f6a4961e82b2e76/229a0/closure.png 922w,\n/static/a77887751bf978b67f6a4961e82b2e76/440c2/closure.png 1844w","sizes":"(min-width: 1844px) 1844px, 100vw"},"sources":[{"srcSet":"/static/a77887751bf978b67f6a4961e82b2e76/1af70/closure.webp 461w,\n/static/a77887751bf978b67f6a4961e82b2e76/c035d/closure.webp 922w,\n/static/a77887751bf978b67f6a4961e82b2e76/5d5ba/closure.webp 1844w","type":"image/webp","sizes":"(min-width: 1844px) 1844px, 100vw"}]},"width":1844,"height":1116}},"publicURL":"/static/a77887751bf978b67f6a4961e82b2e76/closure.png"}}}}]}},"pageContext":{"slug":"/javascript/closure/"}},"staticQueryHashes":[]}