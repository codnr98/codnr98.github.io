---
date: '2023-10-04'
title: '[JS]이터러블'
categories: ['Web', 'javascript', 'iterable']
summary: '클래스 돌아보기'
thumbnail: './iterable.png'
---

이터러블은 꽤나 최근에 추가된 개념이다 .
ES6에서 도입된 프로토콜이며 순회 가능한 자료구조를 만들기위해 정해진 규칙이다.

이터러블 프로토콜이 도입되기 이전에는 배열, 유사배열 객체, 문자열 DOM 컬렉션 등이 통일된 규약 없이 각자 상황에 따라 여러가지 방법으로 순회하였다.

이터러블 프로토콜이 도입되면서 순회 가능한 자료구조를 이터레이션 프로토콜을 준수하는 이터터러블로 통일하여 for...in 문, 스프레드 문법, 구조 분해 할당의 대상으로 사용할 수 있도록 규정했다.

이터레이션 프로토콜에는 이터러블 프로토콜과 이터레이터 프로토콜이 있다.

- 이터러블 프로토콜
  - Symbol.iterator를 프로퍼티 키로 사용한 메서드를 직접 구현하거나, 프로토타입 체인을 통해 상속받은 Symbol.iterator메서드를 호출하면 이터레이터 프로토콜을 준수하는 이터레이터를 반환한다. 이를 보고 이터러블 프로토콜이라 하며, 이터러블 프로토콜을 준수한 객체를 이터러블이라 한다.
  - 이터러블은 for...in 문과 스프레드 문법, 디스트럭처링 할당을 적용할 수 있다.
    - 단 일반 객체에는 스프레드 문법을 사용할 수 있다.
  - 이터러블에 해당하는 표준 빌트인 객체
    - Array
    - String
    - Map
    - Set
    - TypedArray
    - arguments
    - DOM 컬렉션
- 이터레이터 프로토콜
  - 이터러블의 Symbol.iterator 메서드를 호출하면 이터레이터 프로토콜을 준수한 이터레이터를 반환한다.
  - 이터레이터는 next 메서드를 가지고 있으며 헤딩 메서드를 호출하면 이터러블을 순회하며 value와 done 프로퍼티를 갖는 이터레이터 리절트 객체를 반환한다. 이를 이터레이터 프로토콜이라 한다.
    - value 는 프로퍼티는 현재 순회 중인 이터러블의 요소의 값을 나타낸다.
    - done 프로퍼티는 이터러블의 마지막 값을 지나면 false에서 true로 변환된다. 즉 이터러블의 순회 완료 여부를 나타낸다.
  - 이터레이터 프로토콜을 준수한 객체를 이터레이터라하며, 이터레이터는 이터러블의 요소를 탐색하기 위한 포인터로 사용된다.

```JavaScript
[Symbol.iterator]() {...} // 해당 메서드를 호출하면

// 아래의 이터레이터 객체를 리턴한다.
// 그리고 해당 객체에는 next() 메서드가 있으며 이를 통해 이터러블의 요소를 탐색할 수 있다.
{
	next() {
		return {
			value: any,
			done: boolean,
		}
	}
}
```

### 유사 배열 객체와 이터러블

유사 배열 객체는 배열과 비슷하게 인덱스로 프로퍼티 값에 접근할 수 있고 length 프로퍼티를 갖는 객체를 말한다.
해당 객체는 length 프로퍼티를 통해 for 문으로 순회할 수 있으며 인덱스를 나타내는 숫자 형식의 문자열을 프로퍼티의 키값으로 사용해 마치 배열처럼 인덱스로 프로퍼티 값에 접근할 수 있다.

하지만 유사 배열 객체는 이터러블 객체가 가지는 Symbol.iterator 메서드가 없기 때문에 for...of 문을 통해 순회할 수 없다.

## Source

- 이웅모, 모던 자바스크립트 Deep Dive, 위키북스, 2020
